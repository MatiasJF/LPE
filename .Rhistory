source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r", echo=TRUE)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r", echo=TRUE)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r", echo=TRUE)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r", echo=TRUE)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r", echo=TRUE)
clean_data <- df %>% readr::type_convert(locale = readr::locale(decimal_mark = ",")) %>% glimpse()
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r", echo=TRUE)
clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%  glimpse()
View(clean_data)
View(clean_data)
clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(municipio == "Villa") %>%
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
View(villa)
View(villa)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
villa <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(localidad == "VILLAVICIOSA DE ODON") %>% View()
boavi <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(localidad == "VILLAVICIOSA DE ODON"|localidad == "BOADILLA DEL MONTE") %>% View()
boavi <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(localidad == "VILLAVICIOSA DE ODON"|localidad == "BOADILLA DEL MONTE") %>%
arrange(precio_gasoleo_a) %>% View
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
grepl('MADRID', localidad) %>% arrange(precio_gasoleo_a) %>% View()
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
grepl(localidad, 'MADRID') %>% arrange(precio_gasoleo_a) %>% View()
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(str_detect(localidad, "MADRID"))%>% arrange(precio_gasoleo_a) %>% View()
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(str_detect(localidad, "MADRID")) %>% arrange(precio_gasoleo_a) %>% View()
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(str_detect(localidad, "MADRID")) %>% arrange(precio_gasoleo_a)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(grepl("MADRID", localidad)) %>% arrange(precio_gasoleo_a)
View(mad)
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(grepl(" MADRID", localidad)) %>% arrange(precio_gasoleo_a)
View(mad)
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(grepl(" MADRID", localidad)) %>% arrange(precio_gasoleo_a) %>% View()
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(grepl(" MADRID", localidad)) %>% arrange(precio_gasoleo_a) %>% View()
write_excel(mad, "informe_madrid.xlsx")
# install.packages (c("tidyverse", "dplyr", "janitor", "readr"))
library("dplyr", "janitor", "readr","writexl")
write_xlsx(mad, "informe_madrid.xlsx")
# install.packages (c("tidyverse", "dplyr", "janitor", "readr"))
library("dplyr", "janitor", "readr","readxl")
# install.packages (c("tidyverse", "dplyr", "janitor", "readr"))
install.packages("readxl")
library("dplyr", "janitor", "readr","readxl")
# install.packages (c("tidyverse", "dplyr", "janitor", "readr"))
install.packages("writexl")
# install.packages (c("tidyverse", "dplyr", "janitor", "readr", "writexl"))
library("dplyr", "janitor", "readr","writexl")
write_xlsx(mad, "informe_madrid.xlsx")
writexl::write_xlsx(mad, "informe_madrid.xlsx")
writexl::write_xlsx(mad, "informe_madrid.xlsx")
writexl::write_xlsx(mad, "informe_madrid.xlsx")
mad <- clean_data %>% select(precio_gasoleo_a , rotulo , direccion, localidad) %>%
filter(grepl(" MADRID", localidad)) %>% arrange(precio_gasoleo_a) %>% as.data.frame()
writexl::write_xlsx(mad, "informe_madrid.xlsx")
writexl::write_xlsx(mad, "HANDS_N_01/informe_madrid.xlsx")
writexl::write_xlsx(mad, "/HANDS_N_01/informe_madrid.xlsx")
CD
# install.packages (c("tidyverse", "dplyr", "janitor", "readr", "writexl"))
install.packages("openxlsx")
library("dplyr", "janitor", "readr","writexl", "openxlsx")
library("dplyr","janitor","readr","writexl","openxlsx")
View(l)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
install.packages(c("tidyverse", "dplyr", "janitor", "readr", "writexl", "openxlsx"))
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
# install.packages (c("tidyverse", "dplyr", "janitor", "readr", "writexl","openxlsx"))
library(c("dplyr","janitor","readr","writexl","openxlsx"))
# install.packages (c("tidyverse", "dplyr", "janitor", "readr", "writexl","openxlsx"))
library("dplyr","janitor","readr")
library("writexl","openxlsx")
library(
# install.packages (c("tidyverse", "dplyr", "janitor", "readr", "writexl","openxlsx"))
library("dplyr")
library("janitor")
library("dplyr")
library("janitor")
library("readr")
library("writexl")
library("openxlsx")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
openxlsx::write.xlsx(mad, "informe_madrid.xlsx", rowNames = TRUE)
openxlsx::write.xlsx(mad, "informe_madrid2.xlsx", rowNames = TRUE)
setwd
setwd("G:/My Drive/Doble Grado/3º Año/lep22145824")
setwd()
pws
pwd
pwd()
cd..
kaggle datasets list -s gas
pip install kaggle
pip -v
kaggle
kaggle -v
tqdm
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r", echo=TRUE)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>%  View()
provincias_andalucia <- c("ALMERIA", "Cádiz", "Córdoba", "Granada", "Huelva", "Jaén", "Málaga", "Sevilla")
media_andalucia <- clean_data %>% select(rotulo, precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>%  View()
provincias_andalucia <- c("ALMERÍA", "Cádiz", "Córdoba", "Granada", "Huelva", "Jaén", "Málaga", "Sevilla")
media_andalucia <- clean_data %>% select(rotulo, precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>%  View()
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA"))
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>%  View()
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a), comunidad)
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>%  View()
media_andalucia %>% leaflet() %>% addTiles() %>%
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a), comunidad= comunidad) %>%
arrange(media)  %>% write_excel_csv(media_gas, "informes/media_andalucia.xls") %>% View()
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media)  %>% write_excel_csv(media_gas, "informes/media_andalucia.xls") %>% View()
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% View()
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% write_excel_csv(media_gas, "informes/media_andalucia.xls") %>% View()
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% write_excel_csv(media_andalucia, "informes/media_andalucia.xls") %>% View()
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
clear()
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% write_excel_csv(media_andalucia, "informes/media_andalucia.xls") %>% View()
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% View()
# write_excel_csv(media_andalucia, "informes/media_andalucia.xls") %>%
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% View()
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% View()
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(provincia %in% provincias_andalucia) %>% arrange(desc(precio_gasoleo_a))
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% View()
media_gas %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% write_excel_csv(media_gas, "informes/gasolineras_low_cost.xls") %>% filter(media < 1.55) %>% View()
library("leaflet")
library("dplyr")
library("janitor")
library("readr")
library("writexl")
library("openxlsx")
library("htmlwidgets")
install.packages (c("tidyverse", "dplyr", "janitor", "readr", "writexl","openxlsx","leaflet","htmlwidgets"))
install.packages(c("tidyverse", "dplyr", "janitor", "readr", "writexl", "openxlsx", "leaflet", "htmlwidgets"))
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
idcaa <- read_excel("codccaa_OFFICIAL.xl")
idcaa <- read_excel("HANDS_ON_01/codccaa_OFFICIAL.xl")
idcaa <- read_excel("\HANDS_ON_01\codccaa_OFFCIAL.xls")
idcaa <- read_excel("/HANDS_ON_01/codccaa_OFFCIAL.xls")
idcaa <- read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls")
colnames(clean_data)[colnames(clean_data) == "LITERAL"] <- "comunidad"
clean_data <- merge(clean_data, idcaa, by.x = "idcaa", by.y = "CODIGO", all.x = TRUE)
class(clean_data$idcaa)
class(idcaa$CODIGO)
clean_data %>% class(clean_data$idcaa)
exc <- read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls")
exc <- read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls") %>% glimpse()
idca <- exc %>%  janitor::clean_names() %>% glimpse()
idcaa <- idca %>% readr::type_convert(locale = readr::locale(decimal_mark = ",")) %>% glimpse()
exc <- read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls", skip = 1) %>% glimpse()
idca <- exc %>%  janitor::clean_names() %>% glimpse()
idcaa <- idca %>% readr::type_convert(locale = readr::locale(decimal_mark = ",")) %>% glimpse()
clean_data <- merge(clean_data, idcaa, by.x = "idcaa", by.y = "CODIGO", all.x = TRUE)
clean_data %>% glimpse()
clean_data <- merge(clean_data, idcaa, by.x = "idccaa", by.y = "CODIGO", all.x = TRUE)
idcaa <- read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls", skip = 1) %>% glimpse()
idcaa <- readxl::read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls", skip = 1) %>% glimpse()
clean_data <- merge(clean_data, idcaa, by.x = "idccaa", by.y = "CODIGO", all.x = TRUE)
colnames(clean_data)[colnames(clean_data) == "LITERAL"] <- "comunidad"
clean_data %>% glimpse()
precio_andalucia <- mean(media_andalucia$precio_gasoleo_a) %>%  glimpse()
precio_andalucia <- mean(media_andalucia$precio_gasoleo_a)
precio_andalucia
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
# clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
idcaa <- readxl::read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls", skip = 1) %>% glimpse()
clean_data <- merge(clean_data, idcaa, by.x = "idccaa", by.y = "CODIGO", all.x = TRUE)
colnames(clean_data)[colnames(clean_data) == "LITERAL"] <- "comunidad"
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(comunidad = "Andalucía") %>% arrange(desc(precio_gasoleo_a)) %>% glimpse()
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(comunidad == "Andalucía") %>% arrange(desc(precio_gasoleo_a)) %>% glimpse()
precio_andalucia <- mean(media_andalucia$precio_gasoleo_a)
precio_andalucia
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/low_cost/mapa_mad.html")
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% write_excel_csv(media_andalucia, "informes/media_andalucia.xls") %>% View()
provincias_andalucia <- c("ALMERÍA", "CÁDIZ", "CÓRDOBA", "GRANADA", "HUELVA", "JAÉN", "MÁLAGA", "SEVILLA")
# clean_data <- clean_data %>% mutate(comunidad = ifelse(provincia %in% provincias_andalucia, "ANDALUCÍA", ""))
idcaa <- readxl::read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls", skip = 1) %>% glimpse()
clean_data <- merge(clean_data, idcaa, by.x = "idccaa", by.y = "CODIGO", all.x = TRUE)
colnames(clean_data)[colnames(clean_data) == "LITERAL"] <- "comunidad"
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(comunidad == "Andalucía") %>% arrange(desc(precio_gasoleo_a)) %>% glimpse()
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(comunidad == "Andalucía") %>% arrange(desc(precio_gasoleo_a)) %>% glimpse()
precio_andalucia <- mean(media_andalucia$precio_gasoleo_a)
precio_andalucia
precio_andalucia <- mean(media_andalucia$precio_gasoleo_a, na.rm = TRUE)
precio_andalucia
precio_andalucia <- mean(media_andalucia$precio_gasoleo_a, na.rm = TRUE) %>% view()
precio_andalucia <- mean(media_andalucia$precio_gasoleo_a, na.rm = TRUE) %>% View()
media_andalucia %>% group_by(rotulo) %>% summarise(media = mean(precio_gasoleo_a)) %>%
arrange(media) %>% View()
idcaa <- readxl::read_excel("HANDS_ON_01/codccaa_OFFCIAL.xls", skip = 1) %>% glimpse()
clean_data <- merge(clean_data, idcaa, by.x = "idccaa", by.y = "CODIGO", all.x = TRUE)
colnames(clean_data)[colnames(clean_data) == "LITERAL"] <- "comunidad"
media_andalucia <- clean_data %>% select(rotulo, comunidad,  precio_gasoleo_a, direccion, municipio, provincia, latitud, longitud_wgs84) %>%
filter(comunidad == "Andalucía") %>% arrange(desc(precio_gasoleo_a)) %>% glimpse()
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>% View()
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a)
source("G:/My Drive/Doble Grado/3º Año/LPE/HANDS_ON_01/comandos.r")
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/andalucia/mapa_andalucia.html")
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a) %>%
saveWidget("informes/andalucia/mapa_andalucia.html")
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a)
media_andalucia %>% leaflet() %>% addTiles() %>%
addCircleMarkers(lat = ~latitud, lng = ~longitud_wgs84, popup = ~rotulo, label = ~precio_gasoleo_a)
